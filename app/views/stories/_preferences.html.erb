<% content_for :custom_javascript do %>
  <%= observe_field( "sc", :function => "$('search_preference').submit();" ) %>
  <%= observe_field( "st", :function => "$('search_preference').submit();" ) %>
<% end %>
<% form_tag( form_url, :method => form_method, :id => 'search_preference' ) do %>
  <% page_params( :exclude => [ 'page', 'sc', 'st' ] ).each do | param | %>
    <%= hidden_field_tag( param, params[ param ] ) %>
  <% end %> &nbsp;
  <% attributes.each do | attribute | %>
    <%= select_tag( to_param(attribute), options_for_select( preference_options( attribute ), send(attribute) ) ) %>
  <% end %>
<% end %>